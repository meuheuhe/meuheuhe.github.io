---
title: 라즈베리파이 4 클러스터
date: 2021-11-07 17:25:20 +0900
last_modified_at: 2021-11-18 09:15:40 +0900
excerpt: "라즈베리파이4와 K3S을 이용해 클러스터를 구성한 경험담을 공유합니다."
---

한달 전 즈음 초등학교에 다니는 두 아들들이 내게 와 묻는다.. 

> 아빠 마인크래프트 자바 버전을 하고 싶은데 어떻게 해야 해요?

아마도 유튜브를 통해 무언가를 본 모양이다.. 그렇다 드디어 마인크래프트 자바 서버를 구축 할 시간이 온 것이다..!


## 서버?

예전에도 개인 서버는 돌렸던 적이 있었지만, 그때는 [Plex Media Server](https://plex.tv){:target="_blank"}와 파일서버 정도의 용도로 만들었다가, 넷플릭스와 Google Photo, OneDrive로 모두 대체하고 나서는 필요성이 거의 없어지다 보니 전기세가 아깝다는 생각에 중지시켰다가, 최근에는 둘째 아들 PC로 활용하고 있습니다.

> 플렉스 미디어 서버의 경우 120달러 인가 주고 평생회원으로 등록까지 해뒀었는데.. ㅠㅠ


## 늦은 후회

프리랜서 개발자로 오랜 시간을 개발하며 살아왔지만, 영업의 필요성이 없는 특정 회사 종속 개발자로 지내다 보니 미래에 대한 불안에 무감각하게 지내왔기도 했고, 코로나가 터지기 직전에는 오히려 여러 곳의 일을 하게 되면서 엄청 바빠지는 정신없는 나날을 보냈었습니다.

본인도 한 때는 열심히 블로그를 만들고 열심히 포스팅했던 시기가 있었습니다만, 무의미한 컨텐츠 생산에 염증을 느끼고, 특정 플랫폼에 귀속되는 데이터 관리에 불만을 가진터라 결국 더 이상 의미가 없다 생각하여 모든 내용을 삭제하고 더 이상 운영을 하지 않았습니다.

하지만, 코로나로 인해 모든것이 변하고 변하지 않을 것 같던 회사와의 관계도 모두 끊기고 나니, 그때서야 내가 했던 것들에 대한 기록이 없음이 너무나도 크고 아쉽게 다가오던군요.

사람이 한 우물만 파는 것이 좋다고는 하지만, 지금 껏 살아본 제 경험으로는 최소 2~3개의 우물은 파 두는 것이 좋은 듯 싶습니다. 그러다 한 우물이 마르거나 없어져 버리면, 남은 우물을 파면서 동시에 새 우물을 파나가는 것이 현명한 것 아닌가 싶습니다.


## 클러스터

최근 클러스터 기술의 중심에는 Kubernetes, Docker Swarm등이 있고, Docker와 같은 컨테이너 기술을 기반으로 운영되고 있습니다. 저 역시 개발자로서 이러한 기술에 많은 관심을 가지고 있고 직접 운영을 해보며 경험을 쌓기를 원하지만 그러한 환경을 구축하는 것이 개인적으로는 쉽지 않았습니다. 

AWS, Azure, 기타 여러 VPS를 통해 실험적으로 구성을 시켜 단 기간 운영을 하는 것은 거의 셋업 정도의 훈련만 하는 것일뿐, 지속적인 운영을 통해 실질적인 경험을 쌓는것에는 적지 않은 비용을 감당해야하는 한계가 있었습니다. 또한 그 플랫폼에 적응하기 위한 부수적인 학습 피로도도 적지는 않았습니다.

대부분의 개발자는 git을 활용합니다. github이던 gitlab이던 이제는 사용하지 않는 사람이 없을 것입니다. 그리고 CI/CD 역시 들어보거나 활용하는 분들도 많을 것입니다. git 역시 자체적으로 이러한 서비스를 제공하고 있지만, 공개 저장소가 아니면 비용을 지불해야만 합니다. 그리고 개별적인 컨테이너 이미지를 제공하기 위해서도 별도의 비용은 발생합니다. 이러한 서비스는 무료가 아닙니다. 결국은 비용을 필요로 합니다.

자신만의 클러스터를 가지고 있다면 위에서 언급했던 기술과 앞으로 나올 새로운 기술을 모두 적용하고 실험해 볼 수 있으며, 실제로 운영을 하면서 여러 경험을 얻을 수 있는 장점이 분명해 보입니다. 단, 위에서 언급했던 서비스 비용 이상의 지출이 있다면 심각하게 고려를 해봐야 하겠지만요 ;;


## 라즈베리파이 클러스터

Kubernetes를 검색하다 보면 기존보다 라이트하게 운영이 가능한 K3S에 대해 접하게 됩니다. 그리고 K3S에 대해 검색을 하다 보면 Raspberry Pi를 이용한 클러스터에 대한 정보를 접하게 됩니다.

그리고 [Jeff Geerling](https://www.youtube.com/c/JeffGeerling){:target="_blank"} 의 동영상을 보게 되면서 라즈베리파이 클러스터에 대해 알게됩니다. 네.. 저는 그랬습니다.

물론 이전에도 라즈베리파이를 알기는 했습니다. 그때는 아두이노와 같은 개념에 더 가까웠었지요.. 주목할만한 것은 라즈베리파이4 에서 비약적인 성능향상으로 클러스터를 구성하여 활용하는 사람들이 많아졌다는 것을 알게 됩니다.

이거 제가 해보고 싶은 환경에 딱 맞는 솔루션인거 같습니다. 일단 가격이 저렴합니다. 그리고 필요하면 확장을 할 수 있습니다. 최신 버전의 하드웨어가 나오면 그냥 추가해서 함께 운영시키면 됩니다. 진정한 개인용 또는 중소규모 기업용 클러스터에 딱 맞는거 같습니다. 

그 이상은 아마도 AWS, Azure로 넘어가는게 더 안정적일테니깐요.


## 시작합시다

나만의 클러스터를 만들어 봅시다. 내가 원하는 모든것을 할 수 있습니다. 전기세도 저렴합니다. 저장소도 넉넉합니다. 인터넷 제공업체가 내 80, 443번 포트를 막는 것이 제일 두렵습니다만, 회피 서비스는 이미 존재합니다.

일단은 시작해 봅시다. ^^